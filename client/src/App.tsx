import {useDojo} from './DojoContext';import {useComponentValue} from "@dojoengine/react";import {Direction,} from './dojo/createSystemCalls'import {EntityIndex, setComponent} from '@latticexyz/recs';import {useEffect, useState} from 'react';import {getFirstComponentByType} from './utils';import {Moves, Position} from './generated/graphql';function App() {    const {        setup: {            systemCalls: {spawn, move},            components: {Moves, Position},            network: {graphSdk, call}        },        account: {create, list, select, account, isDeploying}    } = useDojo();    // entity id - this example uses the account address as the entity id    const entityId = account.address;    // get current component values    const position = useComponentValue(Position, parseInt(entityId.toString()) as EntityIndex);    const moves = useComponentValue(Moves, parseInt(entityId.toString()) as EntityIndex);    useEffect(() => {        if (!entityId) return;        const fetchData = async () => {            const {data} = await graphSdk.getEntities();            if (data) {                const remaining = getFirstComponentByType(data.entities?.edges, 'Moves') as Moves;                const position = getFirstComponentByType(data.entities?.edges, 'Position') as Position;                setComponent(Moves, parseInt(entityId.toString()) as EntityIndex, {remaining: remaining.remaining})                setComponent(Position, parseInt(entityId.toString()) as EntityIndex, {x: position.x, y: position.y})            }        }        fetchData();    }, [account.address]);    const mapData = [        [            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X"        ],        [            "X",            "X",            "X",            " ",            " ",            " ",            " ",            " ",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X"        ],        [            "X",            "X",            "X",            " ",            " ",            " ",            " ",            " ",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X"        ],        [            "X",            "X",            "X",            "X",            " ",            " ",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X"        ],        [            "X",            "X",            "X",            "X",            " ",            " ",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X"        ],        [            "X",            "X",            "X",            " ",            " ",            " ",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X"        ],        [            "X",            "X",            "X",            " ",            " ",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X"        ],        [            "X",            "X",            " ",            " ",            " ",            " ",            " ",            "X",            "X",            " ",            " ",            " ",            " ",            " ",            " ",            "X",            "X",            "X",            "X",            "X",            "X",            "X"        ],        [            "X",            "X",            " ",            " ",            " ",            " ",            " ",            "X",            "X",            " ",            " ",            " ",            " ",            " ",            " ",            "X",            "X",            "X",            "X",            "X",            "X",            "X"        ],        [            "X",            " ",            " ",            " ",            " ",            " ",            " ",            "X",            "X",            " ",            " ",            " ",            " ",            " ",            " ",            " ",            " ",            " ",            "X",            "X",            "X",            "X"        ],        [            "X",            " ",            " ",            " ",            " ",            " ",            " ",            "X",            "X",            " ",            " ",            " ",            " ",            " ",            " ",            "X",            "X",            " ",            "X",            "X",            "X",            "X"        ],        [            "X",            " ",            " ",            " ",            " ",            " ",            " ",            " ",            "X",            "X",            "X",            "X",            " ",            "X",            "X",            "X",            "X",            " ",            "X",            "X",            "X",            "X"        ],        [            "X",            " ",            " ",            " ",            " ",            " ",            " ",            " ",            "X",            "X",            "X",            "X",            " ",            "X",            "X",            "X",            "X",            " ",            "X",            "X",            "X",            "X"        ],        [            "X",            " ",            " ",            " ",            " ",            " ",            " ",            " ",            "X",            "X",            "X",            "X",            " ",            "X",            "X",            "X",            "X",            " ",            "X",            "X",            "X",            "X"        ],        [            "X",            " ",            " ",            " ",            " ",            " ",            " ",            " ",            "X",            "X",            "X",            "X",            " ",            "X",            "X",            "X",            "X",            " ",            "X",            "X",            "X",            "X"        ],        [            "X",            "X",            "X",            "X",            "X",            "X",            " ",            " ",            "X",            "X",            "X",            "X",            " ",            "X",            "X",            "X",            " ",            " ",            "X",            "X",            "X",            "X"        ],        [            "X",            "X",            "X",            "X",            "X",            "X",            "X",            " ",            " ",            " ",            " ",            " ",            " ",            " ",            " ",            " ",            " ",            " ",            "X",            "X",            "X",            "X"        ],        [            "X",            "X",            "X",            "X",            "X",            "X",            " ",            " ",            "X",            "X",            "X",            "X",            " ",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X"        ],        [            "X",            "X",            "X",            "X",            "X",            "X",            " ",            " ",            " ",            " ",            " ",            " ",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X"        ],        [            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X"        ],        [            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X"        ],        [            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X",            "X"        ]    ]    const [pos, setPos] = useState({x: 0, y: 0});    const render = () => {        let rowString = ""        let dungeon = JSON.parse(JSON.stringify(mapData));        dungeon[pos.y][pos.x] = "<span style='letter-spacing: -9px'>💀</span>";        for (let y = 0; y < dungeon.length; y++) {            for (let x = 0; x < dungeon.length; x++) {                const tile = dungeon[y][x]                rowString += `${tile} `            }            rowString += '\n'        }        return (rowString)    };    const [map, setMap] = useState(render());    useEffect(() => {        function handleKeyDown(event) {            if (event.key === 'w') {                console.log("w")                let p = pos;                p.y = p.y - 1;                setPos(p);                setMap(render())            } else if (event.key === 's') {                console.log("s")                let p = pos;                p.y = p.y +1;                setPos(p);                console.log(pos)                let map = render();                console.log(map)                setMap(map)            } else if (event.key === 'a') {                console.log("a")                let p = pos;                p.x = p.x -1;                setPos(p);                console.log(pos)                let map = render();                console.log(map)                setMap(map)            } else if (event.key === 'd') {                console.log("d")                let p = pos;                p.x = p.x +1;                setPos(p);                console.log(pos)                let map = render();                console.log(map)                setMap(map)            }        }        window.addEventListener('keydown', handleKeyDown);        return () => {            window.removeEventListener('keydown', handleKeyDown);        };    }, []);    return (        <div style={{"width": "900px"}}>            <button onClick={create}>{isDeploying ? "deploying burner" : "create burner"}</button>            <div className="card">                select signer:{" "}                <select onChange={e => select(e.target.value)}>                    {list().map((account, index) => {                        return <option value={account.address} key={index}>{account.address}</option>                    })}                </select>            </div>            <div className="card">                <button onClick={() => spawn(account)}>Spawn</button>                <div>Moves Left: {moves ? `${moves['remaining']}` : 'Need to Spawn'}</div>                <div>Position: {position ? `${position['x']}, ${position['y']}` : 'Need to Spawn'}</div>            </div>            <div className="card">        <pre style={{            "color": "red",            "width": "300px",            "height": "300px",            "text-align": "center",            "font-family": "VT323",            "letter-spacing": "6px"        }} dangerouslySetInnerHTML={{__html:map}}>        </pre>            </div>            <div className="card" style={{"float": "right"}}>                <button onClick={() => move(account, Direction.Up)}>Move Up</button>                <br/>                <button onClick={() => move(account, Direction.Left)}>Move Left</button>                <button onClick={() => move(account, Direction.Right)}>Move Right</button>                <br/>                <button onClick={() => move(account, Direction.Down)}>Move Down</button>            </div>        </div>    );}export default App;