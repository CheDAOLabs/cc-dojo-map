import{RpcProvider as y,Contract as b,shortString as u}from"starknet";var s=class{worldAddress;constructor(t){this.worldAddress=t}getWorldAddress(){return this.worldAddress}};var p=(o=>(o.get="entity",o.set="set_entity",o.entities="entities",o.execute="execute",o.register_system="register_system",o.register_component="register_component",o.component="component",o.system="system",o))(p||{});var g="http://127.0.0.1:5050";import{shortString as l}from"starknet";function w(r){return r.components.map(t=>t.name)}function C(r){return r.components.map(t=>l.encodeShortString(t.name))}function _(r){return r.systems.map(t=>t.name)}function S(r){return r.systems.map(t=>l.encodeShortString(t.name))}var m=(r,t)=>r.contracts.find(e=>e.name===t)?.address||"";var d=class extends s{provider;contract;manifest;constructor(t,e,n=g){super(t),this.provider=new y({nodeUrl:n}),this.contract=new b(e.world.abi,this.getWorldAddress(),this.provider),this.manifest=e}async entity(t,e,n=0,i=0){try{return await this.contract.call("entity",[u.encodeShortString(t),e.keys.length,...e.keys,n,i])}catch(a){throw a}}async entities(t,e){try{return await this.contract.call("entities",[u.encodeShortString(t),e])}catch(n){throw n}}async component(t){try{return await this.contract.call("component",[u.encodeShortString(t)])}catch(e){throw e}}async execute(t,e,n,i,a){try{let c=await t?.getNonce();return await t?.execute({contractAddress:m(this.manifest,e),entrypoint:n,calldata:i},void 0,{maxFee:0,...a,nonce:c})}catch(c){throw c}}async executeMulti(t,e,n){try{let i=await t?.getNonce();return await t?.execute(e,void 0,{maxFee:0,...n,nonce:i})}catch(i){throw i}}async uuid(){try{let{result:t}=await this.provider.callContract({contractAddress:this.getWorldAddress(),entrypoint:"uuid",calldata:[]});if(t&&t.length===1)return parseInt(t[0]);throw new Error("Contract did not return expected uuid")}catch(t){throw new Error(`Failed to fetch uuid: ${t}`)}}async call(t,e,n){try{return await this.provider.callContract({contractAddress:m(this.manifest,t),entrypoint:e,calldata:n})}catch(i){throw new Error(`Failed to call: ${i}`)}}};export{d as RPCProvider,p as WorldEntryPoints,w as getAllComponentNames,C as getAllComponentNamesAsFelt,_ as getAllSystemNames,S as getAllSystemNamesAsFelt,m as getContractByName};
//# sourceMappingURL=index.js.map